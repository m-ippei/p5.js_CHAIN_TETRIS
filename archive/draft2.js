function setup() {
  createCanvas(120, 220);
	frameRate(1)
}

function draw() {
  background(220);
	copyField()
	if(checkField()){
		updateField()
		y++
	}else{
		not_update()
	}
	drawField()
}

function updateField(){
	for(var i=0;i<4;i++){
		for(var j=0;j<4;j++){
			field[j+y][i+x] = fallBlock[j][i]
		}
	}
}

function not_update(){
	for(var i=0;i<4;i++){
		for(var j=0;j<4;j++){
			field[j+y][i+x] = before_FieldAndMino
		}
	}
}

function checkField(){
	for(var i=0;i<4;i++){
		for(var j=0;j<4;j++){
			if(field[j+y][i+x]>0){
				if(fallBlock[j][i]===1){
					return false
				}
			}
		}
	}
	return true
}

function copyField(){
	for(var i=0;i<4;i++){
		for(var j=0;j<4;j++){
			before_FieldAndMino = field[j+y][i+x]
		}
	}
}

function drawField(){
	for(var i=0;i<12;i++){
		for(var j=0;j<22;j++){
			if(field[j][i] === 1){
				fill(0,200,200)
			}else if(field[j][i] === 2){
				fill(30,150,200)
			}else if(field[j][i] === 3){
				fill(30,200,100)
			}else{
				fill(100,100,0)
			}
			rect(i*10,j*10,10,10)
		}
	}
}



var field = [
	[1,0,0,0,1,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,0,0,0,0,0,0,0,0,0,0,1],
	[1,1,1,1,1,1,1,1,1,1,1,1],
]

var mino = [
	[
		[1,1,1,1],
		[0,0,0,0],
		[0,0,0,0],
		[0,0,0,0]
	],[
		[0,0,0,0],
		[0,1,1,0],
		[0,1,1,0],
		[0,0,0,0]
	],[
		[0,0,0,0],
		[1,1,0,0],
		[0,1,1,0],
		[0,0,0,0]
	],[
		[0,0,0,0],
		[0,0,1,1],
		[0,1,1,0],
		[0,0,0,0]
	],[
		[0,0,1,0],
		[0,0,1,0],
		[0,1,1,0],
		[0,0,0,0]
	],[
		[0,1,0,0],
		[0,1,0,0],
		[0,1,1,0],
		[0,0,0,0]
	],[
		[0,0,0,0],
		[0,1,0,0],
		[1,1,1,0],
		[0,0,0,0]
	]
]

var x = 4;
var y = 0;
var fallBlock = mino[0]
var before_FieldAndMino = [[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]
